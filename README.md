# STM32 Elevator 프로젝트

---

### 사용 기술
- **C**
- **FreeRTOS**
- **UART**
- **I2C**
- **SPI**

---

## 1. 개요
- **FreeRTOS** 기반의 실시간 엘리베이터 시스템 구현
- **스텝모터**와 **포토센서**를 이용한 정밀한 층간 이동 및 도착 감지
- **도트 매트릭스**와 **LCD**를 활용한 다중 정보 디스플레이 (현재 층, 방향, 선택 층, 시각)
- 4개의 버튼을 통한 사용자 층 입력 인터페이스

---

## 2. 시스템 구성
- 시스템은 아래와 같이 5개의 독립적인 태스크(Task)로 구성하여 **FreeRTOS**를 통해 병렬 처리되도록 설계되었습니다.
    1.  `Elevator Control Task`
    2.  `LCD Control Task`
    3.  `DS1302 (RTC) Control Task`
    4.  `Dotmatrix Control Task`
    5.  `Buzzer Control Task`
<img width="1558" height="566" alt="image" src="https://github.com/user-attachments/assets/07a3ddfd-aab6-4b9f-a90e-edcbb449adc9" />

---

## 3. 개발 및 구현 내용

### 1) 엘리베이터 제어
- **모터 제어**: 8단계 시퀀스를 통해 **스텝모터**를 정밀하게 제어하여 엘리베이터의 상승/하강 동작 구현
- **운행 관리**: 현재 층과 운행 방향에 따라 우선순위를 동적으로 설정하고, 이를 바탕으로 최적의 목표 층을 결정
- **이벤트 처리**: 외부 인터럽트를 사용하여 버튼 입력 및 포토센서(층 도착) 이벤트를 실시간으로 처리
- **정지 제어**: 목표 층 도착 시 3초간 정지하여 승하차 시간 확보

### 2) LCD 제어
- **통신**: **I2C** 인터페이스로 LCD 제어
- **정보 표시**:
    - **1행**: 사용자가 선택한 모든 층을 표시하며, 현재 운행 목표 층은 **깜빡임(Blink)** 효과로 강조
    - **2행**: DS1302 RTC 모듈로부터 받은 현재 시각을 표시

### 3) DS1302 (RTC) 제어
- **시각 설정**: **UART** 통신을 통해 PC에서 초기 시각 설정
- **데이터 유지**: 설정된 시각 정보는 플래시 메모리에 저장하여 전원이 꺼져도 유지

### 4) Dotmatrix 제어
- **통신**: **SPI** 및 **Shift Register**를 통해 제어
- **정보 표시**:
    - 현재 엘리베이터의 층 수를 숫자로 표시
    - 진행 방향(상승/하강)에 따라 숫자를 위아래로 스크롤하는 애니메이션 효과 적용

### 5) Buzzer 제어
- **알림 기능**: 목표 층에 도착했을 때 **Buzzer**를 울려 사용자에게 도착을 알림

---

## 4. 결과 및 시연 영상
- 아래 링크에서 프로젝트의 전체적인 동작을 담은 시연 영상을 확인할 수 있습니다.
- [프로젝트 시연 영상 링크](https://www.youtube.com/watch?v=tQvCsBOAzPM)

---

## 5. 결론 및 시사점
- **모듈화된 설계**: **FreeRTOS** 기반의 태스크 분리를 통해 기능별 병렬 처리 및 모듈화된 시스템을 성공적으로 구현했습니다.
- **효율적인 운행**: 자체적으로 구현한 층 우선순위 알고리즘을 통해 효율적인 목표 층 결정 및 운행 경로 제어가 가능함을 확인했습니다.
- **확장성**: 최대 층수가 변경되더라도 손쉽게 확장할 수 있는 유연한 구조로 설계되었습니다.
- **하드웨어 제어 능력**: 스텝모터, 센서, LCD 등 다양한 주변 장치와의 연동을 통해 임베디드 시스템의 하드웨어 제어 능력을 향상시켰습니다.
- **사용자 편의성**: LCD에 선택된 층과 실시간 시각을 함께 표시하여 사용자 인터페이스(UI) 기능을 강화했습니다.
- **안정성 검증**: 실제 시연에서 모든 기능이 기획 의도대로 안정적으로 동작함을 검증했습니다
